# NB!! - This repo is Public

## Currently in development

## Todos

- [ ] Set correct file headers based on CRA or Gatsby
- [ ] Add full implementation

------------------------------------------------------


## What is this

### This repo holds the actual implementation of the frontend CDK stack. Variables are loaded from a config file that is generated by our scripts CLI. 
***This repo is not intende to be used alone***


## FRONTEND STACKS

This project contains a working example on deploying a frontend stack with the following

variables are loaded from a config file that is generated by our scripts CLI. 

- creates subdomain on studies-and-me.com eg. example-site.studies-and-me.com
- creates a cloudfront distribution
- redirects http to https
- create the s3 bucket
- websiteIndexDocument is set to 'index.html'
- deploys static build folder to S3 this path can be customized


### console.log not showing
```
running cdk synth -c env=main
```

### deleting a S3 bucket
https://www.scavasoft.com/aws-cdk-s3-auto-delete/

### not using your default AWS user
Prefixing the user name defind in  you .aws/credentials is necessary
my .aws/credentials file contains
```
[default]
aws_access_key_id=********************
aws_secret_access_key=*****************
region=eu-central-1

[studiesandme]
aws_access_key_id=********************
aws_secret_access_key=********************
region=eu-central-1
```

run the cdk with a specific user
```
cdk --profile=studiesandme destroy InfrastructureStack
```

## to deploy succesfully you need the config file

```
{
	"CdkTemplateStackId": "tester-stackt-id",
	"PROJECT_NAME": "tester-",
	"ENV_TYPE": "staging",
	"FRONTEND_BUILD_FOLDER": "../build",
	"HOSTED_DOMAIN_NAME": "example.com",
	"env": { "account": "111111111", "region": "eu-central-1" }
}

``



### Boilerplate setup

This is a blank project for TypeScript development with CDK.

The `cdk.json` file tells the CDK Toolkit how to execute your app.

## Useful commands

 * `npm run build`   compile typescript to js
 * `npm run watch`   watch for changes and compile
 * `npm run test`    perform the jest unit tests
 * `cdk deploy`      deploy this stack to your default AWS account/region
 * `cdk diff`        compare deployed stack with current state
 * `cdk synth`       emits the synthesized CloudFormation template
